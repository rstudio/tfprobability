<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Formal representation of a smooth seasonal effect model — sts_smooth_seasonal • tfprobability</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Formal representation of a smooth seasonal effect model — sts_smooth_seasonal" />
<meta property="og:description" content="The smooth seasonal model uses a set of trigonometric terms in order to
capture a recurring pattern whereby adjacent (in time) effects are
similar. The model uses frequencies calculated via:" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tfprobability</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.12.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/dynamic_linear_models.html">Dynamic linear models</a>
    </li>
    <li>
      <a href="../articles/hamiltonian_monte_carlo.html">Multi-level modeling with Hamiltonian Monte Carlo</a>
    </li>
    <li>
      <a href="../articles/layer_dense_variational.html">Uncertainty estimates with layer_dense_variational</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/rstudio/tfprobability/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Formal representation of a smooth seasonal effect model</h1>
    <small class="dont-index">Source: <a href='https://github.com/rstudio/tfprobability/blob/master/R/sts.R'><code>R/sts.R</code></a></small>
    <div class="hidden name"><code>sts_smooth_seasonal.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The smooth seasonal model uses a set of trigonometric terms in order to
capture a recurring pattern whereby adjacent (in time) effects are
similar. The model uses <code>frequencies</code> calculated via:</p>
    </div>

    <pre class="usage"><span class='fu'>sts_smooth_seasonal</span><span class='op'>(</span>
  <span class='va'>period</span>,
  <span class='va'>frequency_multipliers</span>,
  allow_drift <span class='op'>=</span> <span class='cn'>TRUE</span>,
  drift_scale_prior <span class='op'>=</span> <span class='cn'>NULL</span>,
  initial_state_prior <span class='op'>=</span> <span class='cn'>NULL</span>,
  observed_time_series <span class='op'>=</span> <span class='cn'>NULL</span>,
  name <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>period</th>
      <td><p>positive scalar <code>float</code> <code>Tensor</code> giving the number of timesteps
required for the longest cyclic effect to repeat.</p></td>
    </tr>
    <tr>
      <th>frequency_multipliers</th>
      <td><p>One-dimensional <code>float</code> <code>Tensor</code> listing the
frequencies (cyclic components) included in the model, as multipliers of
the base/fundamental frequency <code>2. * pi / period</code>. Each component is
specified by the number of times it repeats per period, and adds two
latent dimensions to the model. A smooth seasonal model that can
represent any periodic function is given by
<code>frequency_multipliers = [1,2, ..., floor(period / 2)]</code>.
However, it is often desirable to enforce a
smoothness assumption (and reduce the computational burden) by dropping
some of the higher frequencies.</p></td>
    </tr>
    <tr>
      <th>allow_drift</th>
      <td><p>optional <code>logical</code> specifying whether the seasonal
effects can drift over time.  Setting this to <code>FALSE</code>
removes the <code>drift_scale</code> parameter from the model. This is
mathematically equivalent to
<code>drift_scale_prior = tfd.Deterministic(0.)</code>, but removing drift
directly is preferred because it avoids the use of a degenerate prior.
Default value: <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>drift_scale_prior</th>
      <td><p>optional <code>tfd$Distribution</code> instance specifying a prior
on the <code>drift_scale</code> parameter. If <code>NULL</code>, a heuristic default prior is
constructed based on the provided <code>observed_time_series</code>.
Default value: <code>NULL</code>.</p></td>
    </tr>
    <tr>
      <th>initial_state_prior</th>
      <td><p>instance of <code>tfd$MultivariateNormal</code> representing
the prior distribution on the latent states. Must have event shape
<code>[2 * len(frequency_multipliers)]</code>. If <code>NULL</code>, a heuristic default prior
is constructed based on the provided <code>observed_time_series</code>.</p></td>
    </tr>
    <tr>
      <th>observed_time_series</th>
      <td><p>optional <code>float</code> <code>Tensor</code> of shape
<code>batch_shape + [T, 1]</code> (omitting the trailing unit dimension is also
supported when <code>T &gt; 1</code>), specifying an observed time series.
Any priors not explicitly set will be given default values according to
the scale of the observed time series (or batch of time series). May
optionally be an instance of <code>tfp$sts$MaskedTimeSeries</code>, which includes
a mask <code>Tensor</code> to specify timesteps with missing observations.
Default value: <code>NULL</code>.</p></td>
    </tr>
    <tr>
      <th>name</th>
      <td><p>the name of this model component. Default value: 'LocalLinearTrend'.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>an instance of <code>StructuralTimeSeries</code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    
<pre><span class='va'>frequencies</span><span class='op'>[</span><span class='va'>j</span><span class='op'>]</span> <span class='op'>=</span> <span class='fl'>2.</span> <span class='op'>*</span> <span class='va'>pi</span> <span class='op'>*</span> <span class='va'>frequency_multipliers</span><span class='op'>[</span><span class='va'>j</span><span class='op'>]</span> <span class='op'>/</span> <span class='va'>period</span>
</pre>

<p>and then posits two latent states for each <code>frequency</code>. The two latent states
associated with frequency <code>j</code> drift over time via:</p><pre>effect[t] = (effect[t-1] * cos(frequencies[j]) +
             auxiliary[t-] * sin(frequencies[j]) +
             Normal(0., drift_scale))
auxiliary[t] = (-effect[t-1] * sin(frequencies[j]) +
                auxiliary[t-] * cos(frequencies[j]) +
                Normal(0., drift_scale))
</pre>

<p>where <code>effect</code> is the smooth seasonal effect and <code>auxiliary</code> only appears as a
matter of construction. The interpretation of <code>auxiliary</code> is thus not
particularly important.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>For usage examples see <code><a href='sts_fit_with_hmc.html'>sts_fit_with_hmc()</a></code>, <code><a href='sts_forecast.html'>sts_forecast()</a></code>, <code><a href='sts_decompose_by_component.html'>sts_decompose_by_component()</a></code>.</p>
<p>Other sts: 
<code><a href='sts_additive_state_space_model.html'>sts_additive_state_space_model</a>()</code>,
<code><a href='sts_autoregressive_state_space_model.html'>sts_autoregressive_state_space_model</a>()</code>,
<code><a href='sts_autoregressive.html'>sts_autoregressive</a>()</code>,
<code><a href='sts_constrained_seasonal_state_space_model.html'>sts_constrained_seasonal_state_space_model</a>()</code>,
<code><a href='sts_dynamic_linear_regression_state_space_model.html'>sts_dynamic_linear_regression_state_space_model</a>()</code>,
<code><a href='sts_dynamic_linear_regression.html'>sts_dynamic_linear_regression</a>()</code>,
<code><a href='sts_linear_regression.html'>sts_linear_regression</a>()</code>,
<code><a href='sts_local_level_state_space_model.html'>sts_local_level_state_space_model</a>()</code>,
<code><a href='sts_local_level.html'>sts_local_level</a>()</code>,
<code><a href='sts_local_linear_trend_state_space_model.html'>sts_local_linear_trend_state_space_model</a>()</code>,
<code><a href='sts_local_linear_trend.html'>sts_local_linear_trend</a>()</code>,
<code><a href='sts_seasonal_state_space_model.html'>sts_seasonal_state_space_model</a>()</code>,
<code><a href='sts_seasonal.html'>sts_seasonal</a>()</code>,
<code><a href='sts_semi_local_linear_trend_state_space_model.html'>sts_semi_local_linear_trend_state_space_model</a>()</code>,
<code><a href='sts_semi_local_linear_trend.html'>sts_semi_local_linear_trend</a>()</code>,
<code><a href='sts_smooth_seasonal_state_space_model.html'>sts_smooth_seasonal_state_space_model</a>()</code>,
<code><a href='sts_sparse_linear_regression.html'>sts_sparse_linear_regression</a>()</code>,
<code><a href='sts_sum.html'>sts_sum</a>()</code></p></div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Sigrid Keydana.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


